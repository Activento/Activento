<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>tests.py</title>
  <link rel="stylesheet" href="../../pycco.css">
</head>
<body>
<div id="background"></div>
<div id='container'>
  <div class='section'>
    <div class='docs'><h1>tests.py</h1></div>
  </div>
  <div class='clearall'>
  <div class='section' id='section-0'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-0'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.test</span> <span class="kn">import</span> <span class="n">TestCase</span>
<span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">from</span> <span class="nn">django.test</span> <span class="kn">import</span> <span class="n">Client</span>
<span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span>
<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span>
<span class="kn">from</span> <span class="nn">django.views.generic</span> <span class="kn">import</span> <span class="n">TemplateView</span><span class="p">,</span><span class="n">CreateView</span><span class="p">,</span><span class="n">ListView</span>
<span class="kn">from</span> <span class="nn">django.template</span> <span class="kn">import</span> <span class="n">RequestContext</span><span class="p">,</span> <span class="n">loader</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Usuario</span><span class="p">,</span><span class="n">Categoria</span><span class="p">,</span><span class="n">Sigue</span><span class="p">,</span><span class="n">Pertenece</span>
<span class="kn">from</span> <span class="nn">django.core.urlresolvers</span> <span class="kn">import</span> <span class="n">reverse_lazy</span>
<span class="kn">from</span> <span class="nn">django.core.urlresolvers</span> <span class="kn">import</span> <span class="n">reverse</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-1'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-1'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">class</span> <span class="nc">SimpleTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-2'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-2'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-3'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-3'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">test_details</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>


        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">)</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-4'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-4'>#</a>
      </div>
      <p>test que prueba la inserccion de un usuario dentro de la lista de</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">test_Siguiendo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-5'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-5'>#</a>
      </div>
      <p>seguidos de otro"""
u1=Usuario(nombre="Paco", password="mspsi")
u1.save()
u2=Usuario(nombre="Pablo", password="mspsi")
u2.save()
usuario1=Usuario.objects.get(nombre='Paco')
usuario2=Usuario.objects.get(nombre='Pablo')
sigue=Sigue(seguir=usuario1,seguido=usuario2)
sigue.save()
seg = Sigue.objects.get(seguir=usuario1,seguido=usuario2)
self.assertEqual(sigue.seguir,seg.seguir)
self.assertEqual(sigue.seguido,seg.seguido)</p>
<p>test_registrarse(self):</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    		<span class="n">Con</span> <span class="n">este</span> <span class="n">test</span> <span class="n">se</span> <span class="n">va</span> <span class="n">comprobar</span> <span class="n">que</span> <span class="n">podemos</span> <span class="n">instertar</span> <span class="n">un</span> <span class="n">usuario</span>
    		<span class="n">que</span> <span class="n">si</span> <span class="n">lo</span> <span class="n">volvemos</span> <span class="n">a</span> <span class="n">intentar</span> <span class="n">insertar</span> <span class="n">no</span> <span class="n">nos</span> <span class="n">deja</span> <span class="n">hacerlo</span> <span class="n">sin</span> 
    		<span class="n">darnos</span> <span class="n">un</span> <span class="n">error</span> <span class="n">e</span> <span class="n">intentar</span> <span class="n">intrucir</span> <span class="n">usuario</span> <span class="n">con</span> <span class="n">las</span> <span class="n">contrasenias</span> 
    		<span class="n">mal</span> <span class="n">introducidas</span><span class="o">.</span>
    		<span class="n">Para</span> <span class="n">todo</span> <span class="n">ello</span> <span class="n">usamos</span> <span class="n">un</span> <span class="n">cliente</span> <span class="n">con</span> <span class="n">el</span> <span class="n">que</span> <span class="n">le</span> <span class="n">mandamos</span> <span class="n">peticiones</span>
    		<span class="n">post</span> <span class="n">a</span> <span class="n">registrarse</span> <span class="n">y</span> <span class="n">comprobamos</span> <span class="n">los</span> <span class="n">resultados</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-6'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-6'>#</a>
      </div>
      <p>c = Client()</p>
<p>response = c.post(reverse('registrarse'),{'nombre':"Pablo",'password':"entero",'password2':"entero"})
self.assertEqual(response.status_code, 200)</p>
<p>usu = Usuario(nombre="Pablo",password="entero")
self.assertEqual(usu.nombre, "Pablo")
self.assertEqual(usu.password, "entero")</p>
<p>response = c.post(reverse('registrarse'),{'nombre':"Pablo",'password':"entero",'password2':"entero"})
self.assertEqual(response.status_code, 200)
usu = Usuario.objects.filter(nombre="Pablo")</p>
<p>response = c.post(reverse('registrarse'),{'nombre':"Pablo2",'password':"ent",'password2':"ent"})
self.assertEqual(response.status_code, 200)</p>
<p>response = c.post(reverse('registrarse'),{'nombre':"Pablo2",'password':"entera",'password2':"entero"})
self.assertEqual(response.status_code, 200)</p>
<p>ef test_iniciar_sesion(self):</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    		<span class="n">Con</span> <span class="n">este</span> <span class="n">test</span> <span class="n">voy</span> <span class="n">a</span> <span class="n">comprobar</span> <span class="n">si</span> <span class="n">funciona</span> <span class="n">bien</span> <span class="n">el</span> <span class="n">inicio</span> <span class="n">de</span>
    		<span class="n">sesion</span> <span class="n">para</span> <span class="n">ello</span> <span class="n">voy</span> <span class="n">crear</span> <span class="n">un</span> <span class="n">cliente</span><span class="p">,</span> <span class="n">lo</span> <span class="n">registrare</span> <span class="n">usando</span>
    		<span class="n">parte</span> <span class="k">del</span> <span class="n">codigo</span> <span class="k">del</span> <span class="n">test</span> <span class="n">para</span> <span class="n">registrar</span> <span class="n">y</span> <span class="n">luego</span> <span class="n">inicio</span> <span class="n">sesion</span>
    		<span class="n">dos</span> <span class="n">veces</span> <span class="n">una</span> <span class="n">correctamente</span> <span class="n">y</span> <span class="n">otra</span> <span class="n">erroneamente</span><span class="p">,</span> <span class="n">comprobando</span>
    		<span class="n">siempre</span> <span class="n">que</span> <span class="n">no</span> <span class="n">falla</span> <span class="n">el</span> <span class="n">programa</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-7'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-7'>#</a>
      </div>
      <p>c = Client()</p>
<p>response = c.post(reverse('registrarse'),{'nombre':"Pablo",'password':"entero",'password2':"entero"})
self.assertEqual(response.status_code, 200)</p>
<p>usu = Usuario(nombre="Pablo",password="entero")
self.assertEqual(usu.nombre, "Pablo")
self.assertEqual(usu.password, "entero")</p>
<p>response = c.post(reverse('user'),{'nombre':"Pablo",'password':"entero"})
self.assertEqual(response.status_code, 200)</p>
<p>response = c.post(reverse('user'),{'nombre':"Pablo",'password':"entera"})
self.assertEqual(response.status_code, 200)</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
</div>
</body>
